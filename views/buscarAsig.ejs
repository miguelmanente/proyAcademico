<!DOCTYPE html>
<html lang="es">

<body>
     <header>
        <%- include('../views/partials/header'); %>
    </header>

   <div class="container my-5">
  <div class="card shadow">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h3 class="mb-0">Asignaciones</h3>
      <a href="/nuevaAsignacion" class="btn btn-success btn-sm">+ Nueva Asignaci√≥n</a>
    </div>
    <div class="card-body">

      <!-- üîç Formulario de b√∫squeda -->
      <form action="/buscarAsig" method="get" class="row g-2 mb-4">
        <div class="col-md-4">
            <input type="text" name="profesor" class="form-control" 
                placeholder="Buscar por profesor (ej: p√©, p√©rez, juan p√©rez)">
        </div>
        <div class="col-md-4">
            <input type="text" name="curso" class="form-control" placeholder="Buscar por curso">
        </div>
        <div class="col-md-4 d-flex gap-2">
            <button type="submit" class="btn btn-primary">Buscar</button>
            <a href="/buscarAsig" class="btn btn-secondary">Limpiar</a>
        </div>
      </form>


      <!-- üìã Tabla de asignaciones -->
      <table class="table table-striped table-hover align-middle">
        <thead class="table-dark">
          <tr>
            <th>Profesor</th>
            <th>Materia</th>
            <th>Curso</th>
            <th>Horario</th>
            <th>Suplente</th>
            <th class="text-center">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% if (asignaciones.length > 0) { %>
            <% asignaciones.forEach(asig => { %>
              <tr>
                <td><%= asig.profesor %></td>
                <td><%= asig.materia %></td>
                <td><%= asig.curso %></td>
                <td><%= asig.dia_semana %> - <%= asig.hora_inicio %> a <%= asig.hora_fin %></td>
                <td><%= asig.suplente || '-' %></td>
                <td class="text-center">
                  <a href="/editAsignacion/<%= asig.id_asignacion %>" class="btn btn-primary btn-sm">Editar</a>
                  <a href="/asignaciones/<%= asig.id_asignacion %>" 
                     class="btn btn-danger btn-sm"
                     onclick="return confirm('¬øSeguro que deseas eliminar esta asignaci√≥n?')">
                     Eliminar
                  </a>
                </td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr>
              <td colspan="6" class="text-center">No se encontraron resultados</td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>

</body>
</html>